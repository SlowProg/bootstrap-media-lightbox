(function(b){var a=function(c,d){this.init(c,d)};a.DEFAULTS={gallery:true,caption:true};a.prototype.getOptions=function(c,d){d=b.extend({},a.DEFAULTS,c.data(),d);if(d.fontSet===undefined){d.fontSet=this.getFontSet()}return d};a.prototype.init=function(h,e){var g=this;this.options=this.getOptions(h,e);if(b("#bootstrap-media-lightbox").length==0){if(this.options.fontSet==="fa"){var d='<div id="bootstrap-media-lightbox-close"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i><i class="fa fa-times fa-stack-1x fa-inverse" data-dismiss="modal" aria-hidden="true"></i></span></div>';var f='<i class="fa fa-chevron-left"></i>';var c='<i class="fa fa-chevron-right"></i>'}else{var d='<div id="bootstrap-media-lightbox-close"><i class="glyphicon glyphicon-remove-circle" data-dismiss="modal" aria-hidden="true"></i></div>';var f='<i class="glyphicon glyphicon-chevron-left"></i>';var c='<i class="glyphicon glyphicon-chevron-right"></i>'}b(document.body).append('<div class="modal fade" id="bootstrap-media-lightbox" tabindex="-1" role="dialog" aria-labelledby="bootstrap-media-lightbox-label" aria-hidden="true">'+d+'<div id="bootstrap-media-lightbox-content-container" data-dismiss="modal"></div><div id="bootstrap-media-lightbox-backward">'+f+'</div><div id="bootstrap-media-lightbox-forward">'+c+'</div><div id="bootstrap-media-lightbox-caption-container"><div id="bootstrap-media-lightbox-caption"></div></div></div>')}b(h).each(function(i){b(this).on("click",function(j){j.preventDefault();g.updatePictureInLightbox(b(this),h,i);b("#bootstrap-media-lightbox").modal("show")})})};a.prototype.updatePictureInLightbox=function(f,i,d){var e=this;if(this.options.gallery===false||i.size()<2){b("#bootstrap-media-lightbox-backward").hide();b("#bootstrap-media-lightbox-forward").hide()}else{if(d==0){b("#bootstrap-media-lightbox-backward").hide();b("#bootstrap-media-lightbox-forward").show()}else{if(d==i.size()-1){b("#bootstrap-media-lightbox-backward").show();b("#bootstrap-media-lightbox-forward").hide()}else{b("#bootstrap-media-lightbox-backward").show();b("#bootstrap-media-lightbox-forward").show()}}}var g=f.attr("href");var c=["png","jpg","jpeg","bmp"];var h=g.split(".").pop().toLowerCase();if(f.data("target")!==undefined){}if(b.inArray(h,c)>-1){this.addImage(g)}else{if(g.substr(0,22)=="http://www.youtube.com"){this.addYoutubeVideo(g)}else{if(g.substr(0,16)=="http://vimeo.com"){this.addVimeoVideo(g)}else{if(g.substr(0,4)=="http"){this.addIframe(g)}}}}this.addCaption(f);b("#bootstrap-media-lightbox-forward").unbind("click");b("#bootstrap-media-lightbox-forward").click(function(){e.updatePictureInLightbox(i.eq(d+1),i,d+1)});b("#bootstrap-media-lightbox-backward").unbind("click");b("#bootstrap-media-lightbox-backward").click(function(){e.updatePictureInLightbox(i.eq(d-1),i,d-1)})};a.prototype.addImage=function(d){if(this.options.width===undefined&&this.options.height===undefined){var c=new Image();c.src=d;this.options.width=c.width;this.options.height=c.height}else{if(this.options.width===undefined){var c=new Image();c.src=d;this.options.width=this.options.height/c.height*c.width}else{if(this.options.height===undefined){var c=new Image();c.src=d;this.options.height=this.options.width/c.width*c.height}}}this.validateSize();var e=b("#bootstrap-media-lightbox-content-container");e.html('<img width="'+this.options.width+'" height="'+this.options.height+'" src="'+d+'" />');this.setMargins(e)};a.prototype.addIframe=function(d){if(this.options.width===undefined&&this.options.height===undefined){this.options.width=420;this.options.height=315}else{if(this.options.width===undefined){this.options.width=420/(315/this.options.height)}else{if(this.options.height===undefined){this.options.height=315/(420/this.options.width)}}}var e=b("#bootstrap-media-lightbox-content-container");var c='<iframe style="background-color: white" width="'+this.options.width+'" height="'+this.options.height+'" src="'+d+'" frameborder="0" allowfullscreen></iframe>';this.setMargins(e);e.html(c)};a.prototype.addYoutubeVideo=function(e){if(this.options.width===undefined&&this.options.height===undefined){this.options.width=420;this.options.height=315}else{if(this.options.width===undefined){this.options.width=420/(315/this.options.height)}else{if(this.options.height===undefined){this.options.height=315/(420/this.options.width)}}}this.validateSize();var f=b("#bootstrap-media-lightbox-content-container");var d=e.substr(31);var c='<iframe width="'+this.options.width+'" height="'+this.options.height+'" src="http://www.youtube-nocookie.com/embed/'+d+'" frameborder="0" allowfullscreen></iframe>';f.html(c);this.setMargins(f)};a.prototype.addVimeoVideo=function(e){if(this.options.width===undefined&&this.options.height===undefined){this.options.width=420;this.options.height=315}else{if(this.options.width===undefined){this.options.width=420/(315/this.options.height)}else{if(this.options.height===undefined){this.options.height=315/(420/this.options.width)}}}this.validateSize();var f=b("#bootstrap-media-lightbox-content-container");var d=e.substr(17);var c='<iframe width="'+this.options.width+'" height="'+this.options.height+'" src="http://player.vimeo.com/video/'+d+'" frameborder="0" allowfullscreen></iframe>';f.html(c);this.setMargins(f)};a.prototype.addCaption=function(d){var c=d.attr("title");if(c!==""&&c!==undefined&&this.options.caption===true){b("#bootstrap-media-lightbox-caption-container").show();b("#bootstrap-media-lightbox-caption").text(c)}else{b("#bootstrap-media-lightbox-caption-container").hide()}};a.prototype.getFontSet=function(){var c=b('<i class="fa"></i>');if(c.css("font-family")==="FontAwesome"){return"fa"}return"glyphicon"};a.prototype.validateSize=function(e){var g=b(window).height();var d=b(window).width();if(this.options.width+50>d){var c=this.options.width;this.options.width=d-50;this.options.height=this.options.height*this.options.width/c}if(this.options.height+80>g){var f=this.options.height;this.options.height=g-80;this.options.width=this.options.width*this.options.height/f}};a.prototype.setMargins=function(c){var e=b(window).height();var d=b(window).width();c.css({"margin-top":(e-50-this.options.height)/2});c.css({"margin-left":(d-this.options.width)/2})};b.fn.lightbox=function(c){new a(b(this),c)};b(document).ready(function(){b(".lightbox").lightbox()})})(jQuery);